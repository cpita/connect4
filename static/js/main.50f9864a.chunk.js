(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{18:function(t,e,a){t.exports=a(42)},23:function(t,e,a){},24:function(t,e,a){},42:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),i=a(16),l=a.n(i),o=(a(23),a(3)),s=a(4),c=a(2),u=a(6),h=a(5);a(24);function f(t){var e=function(){return"RUNNING"===t.gameState||t.isWinningCell?{opacity:"1"}:{opacity:"0.5"}};return r.a.createElement("div",{className:"Cell",onClick:function(){return t.handleClick(t.column)},style:{pointerEvents:"RUNNING"===t.gameState&&t.allowedEvents?"auto":"none"}},1===t.value?r.a.createElement("div",{className:"red",style:e()}):-1===t.value?r.a.createElement("div",{className:"black",style:e()}):void 0)}var p=a(17),d=a.n(p),m=function(t){Object(u.a)(a,t);var e=Object(h.a)(a);function a(t){var n;return Object(o.a)(this,a),(n=e.call(this,t)).play=n.play.bind(Object(c.a)(n)),n}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(){this.props.turn===this.props.aiPlayer&&"RUNNING"===this.props.gameState&&this.fetchAIMove()}},{key:"play",value:function(t){for(var e=this.props.board,a=e.length-1;a>=0&&0!==e[a][t];)a--;if(-1!==a)if(e[a][t]=this.props.turn,this.isBoardTerminal(e)){var n=this.getWinningCells(e);0===n.length?this.props.updateState(e,"STOPPED",[]):this.props.updateState(e,"STOPPED",n)}else this.props.updateState(e,"RUNNING",[])}},{key:"getWinningCells",value:function(t){for(var e=0;e<6;e++)for(var a=0;a<4;a++)if(4===Math.abs(t[e][a]+t[e][a+1]+t[e][a+2]+t[e][a+3]))return[[e,a],[e,a+1],[e,a+2],[e,a+3]];for(var n=0;n<3;n++)for(var r=0;r<7;r++)if(4===Math.abs(t[n][r]+t[n+1][r]+t[n+2][r]+t[n+3][r]))return[[n,r],[n+1,r],[n+2,r],[n+3,r]];for(var i=0;i<3;i++)for(var l=0;l<4;l++)if(4===Math.abs(t[i][l]+t[i+1][l+1]+t[i+2][l+2]+t[i+3][l+3]))return[[i,l],[i+1,l+1],[i+2,l+2],[i+3,l+3]];for(var o=0;o<3;o++)for(var s=3;s<7;s++)if(4===Math.abs(t[o][s]+t[o+1][s-1]+t[o+2][s-2]+t[o+3][s-3]))return[[o,s],[o+1,s-1],[o+2,s-2],[o+3,s-3]];return[]}},{key:"isBoardTerminal",value:function(t){if(this.getWinningCells(t).length>0)return!0;for(var e=0;e<t.length;e++)for(var a=0;a<t[e].length;a++)if(0===t[e][a])return!1;return!0}},{key:"fetchAIMove",value:function(){for(var t=this,e="",a=0;a<this.props.board.length;a++)e+=this.props.board[a].join(",")+",";var n="".concat("https://connect4-carlos.herokuapp.com/","?board=").concat(e,"&algorithm=").concat(this.props.algorithm,"&difficulty=").concat(this.props.difficulty);d.a.get(n).then((function(t){return t.data})).then((function(e){t.play(e.action)})).catch((function(t){console.log(t)}))}},{key:"renderBoard",value:function(){for(var t=Array(6),e=0;e<this.props.board.length;e++){t[e]=Array(7);for(var a=0;a<this.props.board[e].length;a++)t[e][a]=r.a.createElement(f,{allowedEvents:this.props.turn!==this.props.aiPlayer,isWinningCell:this.props.winningCells.map((function(t){return JSON.stringify(t)})).includes(JSON.stringify([e,a])),gameState:this.props.gameState,value:this.props.board[e][a],row:e,column:a,handleClick:this.play})}return t}},{key:"render",value:function(){return r.a.createElement("div",{className:"Board"},this.renderBoard())}}]),a}(r.a.Component),g=function(t){Object(u.a)(a,t);var e=Object(h.a)(a);function a(t){var n;return Object(o.a)(this,a),(n=e.call(this,t)).handlePlayer=n.handlePlayer.bind(Object(c.a)(n)),n.handleAlgorithm=n.handleAlgorithm.bind(Object(c.a)(n)),n.handleDifficulty=n.handleDifficulty.bind(Object(c.a)(n)),n}return Object(s.a)(a,[{key:"handlePlayer",value:function(t){this.props.handlePlayer(parseInt(t.target.value))}},{key:"handleAlgorithm",value:function(t){this.props.handleAlgorithm(t.target.value)}},{key:"handleDifficulty",value:function(t){this.props.handleDifficulty(parseInt(t.target.value))}},{key:"render",value:function(){return r.a.createElement("div",{className:"Control"},r.a.createElement("div",null,"AI plays as:",r.a.createElement("select",{value:this.props.aiPlayer,onChange:this.handlePlayer},r.a.createElement("option",{value:1},"Player 1"),r.a.createElement("option",{value:-1},"Player 2"))),r.a.createElement("div",null,"Algorithm:",r.a.createElement("select",{value:this.props.algorithm,onChange:this.handleAlgorithm},r.a.createElement("option",{value:"mcts"},"Monte Carlo Tree Search"),r.a.createElement("option",{value:"ab"},"Minimax with A&B Prunning"))),r.a.createElement("div",null,"Difficulty:",r.a.createElement("input",{type:"range",min:1,max:5,value:this.props.difficulty,onChange:this.handleDifficulty})),r.a.createElement("button",{onClick:this.props.handleReset},"Restart"),r.a.createElement("h1",null,this.props.message))}}]),a}(r.a.Component),v=function(t){Object(u.a)(a,t);var e=Object(h.a)(a);function a(t){var n;return Object(o.a)(this,a),(n=e.call(this,t)).state={board:n.initBoard(),turn:1,gameState:"RUNNING",winningCells:[],algorithm:"mcts",aiPlayer:-1,difficulty:1,isAiThinking:!1},n.resetState=n.resetState.bind(Object(c.a)(n)),n}return Object(s.a)(a,[{key:"initBoard",value:function(){for(var t=[],e=0;e<6;e++){t.push([]);for(var a=0;a<7;a++)t[e].push(0)}return t}},{key:"resetState",value:function(){var t=this;this.setState((function(){return{board:t.initBoard(),turn:1,gameState:"RUNNING",winningCells:[]}}))}},{key:"getMessage",value:function(){return"STOPPED"===this.state.gameState?0===this.state.winningCells.length?"Tie":this.state.board[this.state.winningCells[0][0]][this.state.winningCells[0][1]]===this.state.aiPlayer?"I win":"You win":this.state.turn===this.state.aiPlayer?"I am thinking...":"Your turn, human"}},{key:"render",value:function(){var t=this;return r.a.createElement("div",{className:"container"},r.a.createElement(m,{algorithm:this.state.algorithm,difficulty:this.state.difficulty,aiPlayer:this.state.aiPlayer,winningCells:this.state.winningCells,gameState:this.state.gameState,turn:this.state.turn,board:this.state.board,updateState:function(e,a,n){return t.setState((function(t){return{board:e,turn:-1*t.turn,gameState:a,winningCells:n}}))}}),r.a.createElement(g,{message:this.getMessage(),gameState:this.state.gameState,algorithm:this.state.algorithm,difficulty:this.state.difficulty,aiPlayer:this.state.aiPlayer,handleReset:this.resetState,handlePlayer:function(e){return t.setState((function(){return{aiPlayer:e}}))},handleAlgorithm:function(e){return t.setState((function(){return{algorithm:e}}))},handleDifficulty:function(e){return t.setState((function(){return{difficulty:e}}))}}))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(v,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[18,1,2]]]);
//# sourceMappingURL=main.50f9864a.chunk.js.map